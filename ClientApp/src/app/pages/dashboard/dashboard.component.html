<div class="dashboard__container">

  <app-header
    [pageTitle]="'Travel Dashboard'"
    [pageSubtitle]="'Your journey overview and insights'"
    [pageActions]="pageHeaderActions"
    (actionClicked)="onHeaderActionClick($event)"
  ></app-header>

  <div class="dashboard">
    <div class="dashboard__column dashboard__column--left">
      <mat-card appearance="outlined" class="dashboard__card dashboard__card--trips">
        <mat-card-header class="dashboard__card-header">
          <span class="dashboard__card-title title">Active Trips</span>
          <span class="dashboard__card-subtitle subtitle">Your current travel adventures</span>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-content-trips">
            @if (activeTrips().length > 0) {
              @for (trip of activeTrips(); track trip.trip.id) {
                <app-trip-summary [tripDetails]="trip"></app-trip-summary>
              }
            } @else {
              <div class="dashboard__empty-state">
                <mat-icon>flight</mat-icon>
                <p>No active trips right now</p>
                <span>Your next adventure awaits!</span>
              </div>
            }
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined" class="dashboard__card dashboard__card--trips">
        <mat-card-header class="dashboard__card-header">
          <span class="dashboard__card-title title">Planned Trips</span>
          <span class="dashboard__card-subtitle subtitle">Your upcoming travel plans</span>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-content-trips">
            @if (plannedTrips().length > 0) {
              @for (trip of plannedTrips(); track trip.trip.id) {
                <app-trip-summary [tripDetails]="trip"></app-trip-summary>
              }
            } @else {
              <div class="dashboard__empty-state">
                <mat-icon>calendar</mat-icon>
                <p>No planned trips yet</p>
                <span>Start planning your next adventure!</span>
              </div>
            }
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined" class="dashboard__card dashboard__card--memories">
        <mat-card-header class="dashboard__card-header">
          <span class="dashboard__card-title title">Trip Memories</span>
          <span class="dashboard__card-subtitle subtitle">Your completed adventures and experiences</span>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__card-content-memories">
            @if (completedTrips().length > 0) {
              @for (trip of completedTrips(); track trip.trip.id) {
                <app-trip-summary [tripDetails]="trip"></app-trip-summary>
              }
            } @else {
              <div class="dashboard__empty-state">
                <mat-icon>photo_album</mat-icon>
                <p>No completed trips yet</p>
                <span>Finish a trip to add it to your memories</span>
              </div>
            }
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <div class="dashboard__column dashboard__column--right">
      <mat-card appearance="outlined" class="dashboard__card dashboard__card--stats">
        <mat-card-header class="dashboard__card-header">
          <span class="dashboard__card-title title">Travel Statistics</span>
          <span class="dashboard__card-subtitle subtitle">Your travel journey insights</span>
        </mat-card-header>
        <mat-card-content>
          @if (completedTrips().length > 0 || activeTrips().length > 0) {
          <div class="dashboard__stats-grid">
            <div class="dashboard__stat-card">
              <div class="dashboard__stat-card-icon" style="background: linear-gradient(135deg, #e0f7fa, #b3e5fc)">
                <mat-icon>flight</mat-icon>
              </div>
              <div class="dashboard__stat-card-content">
                <span class="dashboard__stat-card-value">{{ totalTripsCompleted() }}</span>
                <span class="dashboard__stat-card-label">Trips Completed</span>
              </div>
            </div>

            <div class="dashboard__stat-card">
              <div class="dashboard__stat-card-icon" style="background: linear-gradient(135deg, #f0f4c3, #dcedc8)">
                <mat-icon>public</mat-icon>
              </div>
              <div class="dashboard__stat-card-content">
                <span class="dashboard__stat-card-value">{{ totalDestinationsVisited() }}</span>
                <span class="dashboard__stat-card-label">Destinations</span>
              </div>
            </div>

            <div class="dashboard__stat-card">
              <div class="dashboard__stat-card-icon" style="background: linear-gradient(135deg, #f3e5f5, #e1bee7)">
                <mat-icon>attach_money</mat-icon>
              </div>
              <div class="dashboard__stat-card-content">
                <span class="dashboard__stat-card-value">${{ totalBudgetSpentOnTrips() }}</span>
                <span class="dashboard__stat-card-label">Total Spent</span>
              </div>
            </div>

            <div class="dashboard__stat-card">
              <div class="dashboard__stat-card-icon" style="background: linear-gradient(135deg, #e0f2f1, #b2dfdb)">
                <mat-icon>schedule</mat-icon>
              </div>
              <div class="dashboard__stat-card-content">
                <span class="dashboard__stat-card-value">{{ averageTripDuration() }}d</span>
                <span class="dashboard__stat-card-label">Avg. Duration</span>
              </div>
            </div>
          </div>
          <div class="dashboard__stats-divider"></div>
          <div class="dashboard__fun-facts">
            @if (upcomingTrips() > 0) {
            <div class="dashboard__fun-fact">
              <mat-icon>info</mat-icon>
              <span>{{ upcomingTrips() }} {{ upcomingTrips() === 1 ? 'trip' : 'trips' }} planned for the future!</span>
            </div>
            } @if (activeTripDays() > 0) {
            <div class="dashboard__fun-fact">
              <mat-icon>calendar_today</mat-icon>
              <span>{{ activeTripDays() }} {{ activeTripDays() === 1 ? 'day' : 'days' }} left on your current adventure!</span>
            </div>
            }
          </div>
          } @else {
          <div class="dashboard__empty-state-stats">
            <mat-icon>trending_up</mat-icon>
            <p>No travel statistics yet</p>
            <span>Start planning trips to see your travel insights</span>
          </div>
          }
        </mat-card-content>
      </mat-card>

      <mat-card appearance="outlined" class="dashboard__card dashboard__card--actions">
        <mat-card-header class="dashboard__card-header">
          <span class="dashboard__card-title title">Quick Actions</span>
        </mat-card-header>
        <mat-card-content>
          <div class="dashboard__actions-grid">
            <button class="dashboard__action-btn" (click)="onQuickActionClick('plan-trip')">
              <mat-icon>add_circle_outline</mat-icon>
              <span class="dashboard__action-label">Plan New Trip</span>
            </button>
            <button class="dashboard__action-btn" (click)="onQuickActionClick('add-booking')">
              <mat-icon>confirmation_number</mat-icon>
              <span class="dashboard__action-label">Add Booking</span>
            </button>
            <button class="dashboard__action-btn" (click)="onQuickActionClick('generate-itinerary')">
              <mat-icon>auto_awesome</mat-icon>
              <span class="dashboard__action-label">AI Itinerary</span>
            </button>
            <button class="dashboard__action-btn" (click)="onQuickActionClick('check-flights')">
              <mat-icon>flight</mat-icon>
              <span class="dashboard__action-label">Check Flights</span>
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
